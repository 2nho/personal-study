![image](https://github.com/user-attachments/assets/a5aa185c-6a4d-407d-a00a-39830afff4c4)

##General
가.파일명(Filename): 백업 파일의 이름과 경로를 지정합니다. 파일 선택 대화상자를 열려면 파일 아이콘을 클릭하세요.

나.형식(Format): 백업 파일의 형식을 선택합니다.

    나-1 일반(Plain): 일반 텍스트 SQL 스크립트입니다. 이 형식은 pg_restore로 복원할 수 없으며, psql을 사용해야 합니다.

    나-2 커스텀(Custom): PostgreSQL 전용 압축 형식입니다. pg_restore로만 복원 가능하며, 복원 시 객체를 선택적으로 복원할 수 있습니다.

    나-3 타르(Tar): tar 아카이브 형식입니다. 선택적 복원이 가능하지만, 객체 순서를 변경할 수 없습니다.

    나-4 디렉토리(Directory): 압축되지 않은 디렉토리 형식입니다. 여러 파일로 분할되어 저장됩니다.
    ```
    Custom: 가장 유연한 형식으로, 선택적 복원이 가능하고 압축을 지원합니다. 대부분의 프로덕션 환경에서 권장됩니다.
 
    Plain: 가장 호환성이 좋은 형식이지만, 대용량 데이터나 BLOB 객체가 많은 경우 비효율적입니다.

    Directory: 병렬 백업/복원을 지원하므로 대용량 데이터베이스에 적합합니다.

    Tar: 표준 유닉스 도구로 처리할 수 있지만, 압축을 지원하지 않아 저장 공간이 많이 필요합니다.
    ```
    
    압축 비율 선택 팁
    0: 압축 없음, 백업 속도가 빠르지만 파일 크기가 큼

    1-3: 낮은 압축, 적당한 속도와 크기 균형

    4-6: 중간 압축, 일반적인 용도에 권장

    7-9: 높은 압축, 백업 속도가 느리지만 파일 크기가 작음
    
  
다.압축 비율(Compression ratio): 백업 파일의 압축 수준을 0(무압축)부터 9(최대압축)까지 설정합니다.

라.인코딩(Encoding): 백업 파일의 문자 인코딩을 지정합니다. 기본값은 데이터베이스 인코딩입니다.

마.ROLE name ==  --role=ROLENAME 옵션:
1. 덤프 작업을 수행하는 동안에만 일시적으로 적용,   
2. 세션 내 일시적 역할 전환: pg_dump 명령을 실행할 때 --role 옵션을 사용하면,  
   덤프 작업이 시작되기 전에 내부적으로 SET ROLE rolename 명령이 실행  
3. 역할 전환은 덤프 작업을 수행하는 세션에만 영향을 미치며,  
   생성된 덤프 파일에는 이 옵션이 사용되었다는 정보가 포함되지 않습니다.  
4. 권한이 낮은 사용자가 --role 옵션을 사용하여 관리자 역할로 덤프를 시도할 경우,  
    해당 사용자가 지정된 관리자 역할의 멤버가 아니라면 권한 오류가 발생

   
![image](https://github.com/user-attachments/assets/468f616e-7fb7-4c8c-9305-337884854d74)
```
Pre-data: 테이블 구조, 함수, 타입 정의 등 데이터 이전에 필요한 모든 DDL(Data Definition Language)을 포함합니다.
          데이터베이스 구조만 복원하려는 경우에 유용.

Data: 실제 테이블 내용을 포함.

Post-data: 인덱스, 트리거, 제약조건 등 데이터 로드 후에 적용되어야 하는 객체들을 포함합니다.
           데이터 로드 성능을 향상시키기 위해 이러한 객체들을 나중에 적용하는 것이 유리.

Only data: 스키마 정의 없이 데이터만 백업합니다. 이미 대상 데이터베이스에 동일한 구조가 있을 때 유용.

Only schemas: 데이터 없이 구조만 백업합니다. 새 환경에서 데이터베이스 구조를
              복제하거나 테스트 환경을 설정할 때 유용합니다.

Blobs: 대용량 객체(Binary Large Objects)는 백업 파일 크기를 크게 증가시킬 수 있습니다.
       이미지, 문서, 바이너리 파일 등이 저장된 경우 백업 크기와 시간에 상당한 영향.
```

```
Owner 옆의 스위치를 오른쪽 위치로 이동하여 객체 소유권을 설정하는 명령을 제외하세요.

Privileges 옆의 스위치를 오른쪽 위치로 이동하여 접근 권한을 생성하는 명령을 제외하세요.

Tablespaces 옆의 스위치를 오른쪽 위치로 이동하여 테이블스페이스를 제외하세요.

Unlogged table data 옆의 스위치를 오른쪽 위치로 이동하여 언로그드 테이블의 내용을 제외하세요.

Comments 옆의 스위치를 오른쪽 위치로 이동하여 주석을 설정하는 명령을 제외하세요. 
         참고: 이 옵션은 데이터베이스 서버 버전이 11 이상인 경우에만 표시됩니다.

Publications 옆의 스위치를 오른쪽 위치로 이동하여 발행(publications)을 제외하세요.

Subscriptions 옆의 스위치를 오른쪽 위치로 이동하여 구독(subscriptions)을 제외하세요.

Security labels 옆의 스위치를 오른쪽 위치로 이동하여 보안 레이블을 제외하세요.

Toast compressions 옆의 스위치를 오른쪽 위치로 이동하여 Toast 압축을 제외하세요.
                참고: 이 옵션은 데이터베이스 서버 버전이 14 이상인 경우에만 표시됩니다.

Table access methods 옆의 스위치를 오른쪽 위치로 이동하여 테이블 접근 방법을 제외하세요.
                   참고: 이 옵션은 데이터베이스 서버 버전이 15 이상인 경우에만 표시됩니다.
```
```
객체 제외 옵션의 실무적 활용
Owner(소유자): 소유권 정보를 제외하면 복원 시 현재 사용자가 모든 객체의 소유자가 됩니다.
다른 환경으로 마이그레이션할 때 소유권 구조를 단순화하려는 경우에 유용합니다.

Privileges(권한): 접근 권한을 제외하면 복원 후 모든 객체에 대한 권한을 새로 설정해야 합니다.
보안 정책이 다른 환경으로 이전할 때 기존 권한을 무시하고 새로운 권한 체계를 적용하려는 경우에 유용합니다.

Tablespaces(테이블스페이스): 테이블스페이스 정보를 제외하면 모든 객체가 기본 테이블스페이스에 생성됩니다.
 디스크 레이아웃이 다른 서버로 이전할 때 유용합니다.

Unlogged table data(언로그드 테이블 데이터): 언로그드 테이블은 WAL(Write-Ahead Log)에 기록되지 않아
성능이 향상되지만 충돌 시 데이터가 손실될 수 있습니다.
 이 데이터를 제외하면 백업 크기를 줄일 수 있습니다.

Comments(주석): 객체에 대한 설명 정보를 제외합니다.
 문서화가 중요하지 않은 환경으로 이전할 때 백업 크기를 줄이는 데 도움이 됩니다.

Publications 및 Subscriptions: PostgreSQL의 논리적 복제 기능과 관련된 객체입니다.
 복제 설정을 새 환경에 적용하지 않으려는 경우 제외할 수 있습니다.

Security labels(보안 레이블): SELinux와 같은 외부 보안 프레임워크와 관련된 레이블입니다.
 대상 시스템에 동일한 보안 프레임워크가 없는 경우 제외하는 것이 좋습니다.

Toast compressions(Toast 압축): 대용량 값을 저장하기 위한 PostgreSQL의 내부 압축 메커니즘입니다.
 PostgreSQL 14부터 지원되며, 이전 버전으로 복원할 때는 제외해야 합니다.

Table access methods(테이블 접근 방법): PostgreSQL 15에서 도입된 기능으로, 테이블 데이터 저장 및 접근 방식을 정의합니다.
이전 버전과의 호환성을 위해 제외할 수 있습니다.
```

![image](https://github.com/user-attachments/assets/65768c95-b148-478a-8721-1cea1a10fdb6)

```
계속하려면 쿼리 옵션 탭을 클릭하세요.
이 추가 필드들을 사용하여 백업에 포함되어야 할 명령문의 유형을 지정하세요.

Use INSERT commands 옆의 스위치를 오른쪽 위치로 이동하여 COPY 명령 대신 INSERT 문 형태로 데이터를 덤프하세요.
 참고: 이는 백업에서의 복원을 느리게 만들 수 있습니다.

Maximum rows per INSERT command 필드를 사용하여 INSERT 명령당 최대 행 수를 제어하세요.
 참고: 이 옵션은 데이터베이스 서버 버전이 12 이상인 경우에만 표시됩니다.

On conflict do nothing to INSERT command 옆의 스위치를 오른쪽 위치로 이동하여 INSERT 명령에 ON CONFLICT DO NOTHING을 추가하세요.
 이 옵션은 Use INSERT commands, Use Column INSERTS 또는 Maximum rows per INSERT command가 지정되지 않으면 유효하지 않습니다.
참고: 이 옵션은 데이터베이스 서버 버전이 12 이상인 경우에만 표시됩니다.

Include CREATE DATABASE statement 옆의 스위치를 오른쪽 위치로 이동하여 백업 복원 시 새 데이터베이스를 생성하는 명령을 백업에 포함시키세요.

Include DROP DATABASE statement 옆의 스위치를 오른쪽 위치로 이동하여 백업 중 객체를 재생성하기 전에
 동일한 이름의 기존 데이터베이스 객체를 삭제하는 명령을 백업에 포함시키세요.

Include IF EXISTS clause 옆의 스위치를 오른쪽 위치로 이동하여 데이터베이스 및 기타 객체를 삭제할 때 IF EXISTS 절을 추가하세요.
 이 옵션은 Include DROP DATABASE statement도 설정되어 있지 않으면 유효하지 않습니다.

2. 추가보완 정보 제공
INSERT 명령 사용의 장단점
장점:

데이터를 선택적으로 복원할 수 있음

복원 중 문제가 발생한 행을 쉽게 식별할 수 있음

단점:

COPY 명령에 비해 복원 속도가 느림

백업 파일 크기가 더 커질 수 있음

Maximum rows per INSERT command 최적화
이 옵션은 메모리 사용량과 성능 사이의 균형을 조절하는 데 유용함

값이 작을수록 메모리 사용량은 줄어들지만 복원 시간이 길어질 수 있음

대규모 데이터베이스의 경우, 이 값을 조정하여 복원 성능을 최적화할 수 있음

ON CONFLICT DO NOTHING 사용 시나리오
데이터 중복을 허용하지 않으면서 기존 데이터를 유지하고자 할 때 유용함

증분 백업/복원 시나리오에서 특히 유용할 수 있음

CREATE DATABASE와 DROP DATABASE 문 포함의 영향
이 옵션들을 포함하면 백업 파일만으로 완전한 데이터베이스 재생성이 가능함

주의: DROP DATABASE는 기존 데이터를 모두 삭제하므로 신중하게 사용해야 함

IF EXISTS 절의 중요성
이 옵션을 사용하면 복원 스크립트가 더 안정적으로 실행됨

객체가 존재하지 않을 때 발생할 수 있는 오류를 방지함

버전 호환성 고려사항
PostgreSQL 12 이상에서 제공되는 새로운 옵션들(Maximum rows per INSERT, ON CONFLICT DO NOTHING)은 이전 버전과의 호환성 문제를 일으킬 수 있음

다양한 버전의 PostgreSQL 서버를 관리하는 경우, 이러한 버전 특화 기능 사용 시 주의가 필요함
```

![image](https://github.com/user-attachments/assets/4672b852-78a3-46cc-a3c1-2753f569d5e9)

```
테이블 옵션 탭의 필드를 사용하여 백업에 포함되어야 할 테이블과 관련된 옵션을 지정하세요.

Use Column INSERTS 옆의 스위치를 오른쪽 위치로 이동하여 명시적인 열 이름을 포함한 INSERT 문 형태로 데이터를 덤프하세요.
 참고: 이는 백업에서의 복원을 느리게 만들 수 있습니다.

Load via partition root 옆의 스위치를 오른쪽 위치로 이동하여, 파티션 테이블에 대한 COPY 또는 INSERT 문을 덤프할 때 파티션 자체가
아닌 파티션 계층 구조의 루트를 대상으로 하도록 합니다. 참고: 이 옵션은 데이터베이스 서버 버전이 11 이상인 경우에만 표시됩니다.

Enable row security 옆의 스위치를 오른쪽 위치로 이동하여 row_security를 켜고, 사용자가 접근 권한이 있는 테이블 내용의 일부만 덤프할 수 있도록 합니다.
 이 옵션은 행 보안이 있는 테이블의 내용을 덤프할 때만 관련이 있습니다.

Include table(s) and Children 필드를 사용하여 패턴과 일치하는 테이블과 해당 테이블의 모든 파티션 또는 상속 자식 테이블을 덤프하세요.
 참고: 이 옵션은 데이터베이스 서버 버전이 16 이상인 경우에만 표시됩니다.

Exclude patterns 필드는 다음과 같은 방식으로 패턴을 제외하는 데 사용됩니다:

Table(s) 필드를 사용하여 패턴과 일치하는 테이블을 덤프하지 않습니다. 여러 패턴은 공백으로 구분하여 지정할 수 있습니다.

Table(s) data 필드를 사용하여 패턴과 일치하는 테이블의 데이터를 덤프하지 않습니다. 여러 패턴은 공백으로 구분하여 지정할 수 있습니다.

Table(s) and children 필드를 사용하여 패턴과 일치하는 테이블과 해당 테이블의 모든 파티션 또는 상속 자식 테이블을 덤프하지 않습니다.
참고: 이 옵션은 데이터베이스 서버 버전이 16 이상인 경우에만 표시됩니다.

Table(s) data and children 필드를 사용하여 테이블 패턴과 일치하는 테이블과 해당 테이블의 모든 파티션 또는 상속 자식 테이블의 데이터를 덤프하지 않습니다.
참고: 이 옵션은 데이터베이스 서버 버전이 16 이상인 경우에만 표시됩니다.

2. 추가보완 정보 제공
Column INSERT 사용의 실무적 의미
Column INSERT는 열 이름을 명시적으로 포함하므로 테이블 구조가 변경되어도 복원이 가능합니다.

예: INSERT INTO table_name (column1, column2) VALUES (value1, value2);

이는 스키마 변경이 빈번한 개발 환경이나 테이블 구조가 시간에 따라 변경될 수 있는 환경에서 유용합니다.

단점은 백업 파일 크기가 커지고 복원 속도가 느려진다는 점입니다.

파티션 테이블 관련 옵션의 중요성
PostgreSQL 11부터 도입된 Load via partition root 옵션은 파티션 테이블 작업 시 매우 중요합니다.

이 옵션을 사용하면 데이터가 파티션 테이블의 루트를 통해 로드되므로, 파티션 키에 따라 올바른 파티션으로 자동 라우팅됩니다.

이는 파티션 구조가 변경되었거나 다른 환경으로 데이터를 이전할 때 특히 유용합니다.

행 수준 보안(Row Security)과 백업
Enable row security 옵션은 PostgreSQL의 행 수준 보안 기능과 관련이 있습니다.

이 옵션을 활성화하면 사용자는 자신이 접근 권한을 가진 행만 백업할 수 있습니다.

이는 다중 테넌트 데이터베이스나 엄격한 데이터 접근 제어가 필요한 환경에서 중요합니다.

주의: 슈퍼유저는 기본적으로 행 수준 보안을 우회하므로, 이 옵션을 사용하려면 명시적으로 활성화해야 합니다.

테이블 패턴 지정의 고급 활용
PostgreSQL 16에서 도입된 Include/Exclude table(s) and Children 옵션은 복잡한 테이블 계층 구조를 다룰 때 매우 유용합니다.

패턴 지정 시 와일드카드를 사용할 수 있습니다:

*: 모든 문자열과 일치

?: 단일 문자와 일치

예: public.* (public 스키마의 모든 테이블), customer_* (customer_로 시작하는 모든 테이블)

스키마 지정 형식: schema_name.table_name

실무 활용 팁
대규모 데이터베이스에서는 특정 테이블만 선택적으로 백업하거나 특정 테이블의 데이터만 제외하는 것이 효율적일 수 있습니다.

개발/테스트 환경에서는 로그 테이블이나 대용량 데이터 테이블의 데이터를 제외하여 백업 크기와 시간을 줄일 수 있습니다.

파티션 테이블을 사용하는 경우, 전체 파티션 계층을 포함하거나 제외하는 옵션을 활용하여 데이터 일관성을 유지하는 것이 중요합니다.
```

![image](https://github.com/user-attachments/assets/ba755f93-a443-4a6a-8621-ff07546e65a4)

```
Triggers (active when creating a data-only backup) 옆의 스위치를 오른쪽 위치로 이동하여 데이터가
로드되는 동안 대상 테이블의 트리거를 비활성화하는 명령을 포함시키세요. 이 옵션은 데이터 전용 백업을 생성할 때 활성화됩니다.

$ quoting 옆의 스위치를 오른쪽 위치로 이동하여 함수 본문 내에서 달러 쿼팅을 활성화하세요.
 이 옵션이 비활성화되면 함수 본문은 SQL 표준 문자열 구문을 사용하여 인용됩니다.

2. 추가보완 정보 제공
트리거 비활성화 옵션의 중요성
데이터 로드 중 트리거를 비활성화하면 복원 속도를 크게 향상시킬 수 있습니다.

이는 특히 대량의 데이터를 복원할 때 유용합니다.

트리거가 복잡한 로직을 수행하거나 외부 시스템과 상호작용하는 경우 더욱 중요합니다.

주의: 이 옵션을 사용하면 트리거에 의해 수행되는 데이터 검증이나 추가 작업이 수행되지 않을 수 있습니다.

달러 쿼팅($)의 실무적 활용
달러 쿼팅은 PostgreSQL에서 문자열을 더 쉽게 처리할 수 있게 해주는 기능입니다.

주요 장점:

문자열 내에서 작은따옴표(')를 이스케이프할 필요가 없어집니다.

SQL 인젝션 위험을 줄일 수 있습니다.

복잡한 문자열(예: JSON, XML)을 더 쉽게 처리할 수 있습니다.

예시:

sql
CREATE FUNCTION my_function() RETURNS text AS $$
  BEGIN
    RETURN 'This is a string with ''quotes'' inside';
  END;
$$ LANGUAGE plpgsql;
달러 쿼팅을 비활성화하면 표준 SQL 문자열 구문을 사용하게 되어, 다른 데이터베이스 시스템과의 호환성이 향상될 수 있습니다.

실무 적용 팁
대규모 데이터 복원 시 트리거 비활성화 옵션을 사용하고, 복원 후 데이터 정합성을 별도로 검증하는 것이 효율적일 수 있습니다.

달러 쿼팅은 PostgreSQL 특화 기능이므로, 다른 데이터베이스 시스템과의 호환성이 중요한 경우 비활성화를 고려할 수 있습니다.

함수나 프로시저가 많은 데이터베이스에서는 달러 쿼팅을 활성화하여 코드 가독성과 유지보수성을 높일 수 있습니다.
```

```
Verbose messages 옆의 스위치를 왼쪽 위치로 이동하여 pg_dump에게 상세 메시지를 제외하도록 지시하세요.

Force double quotes on identifiers 옆의 스위치를 오른쪽 위치로 이동하여 모든 식별자에 인용 부호를 강제로 적용하세요.

Use SET SESSION AUTHORIZATION 옆의 스위치를 오른쪽 위치로 이동하여 객체 소유권을 결정하기 위해 SET SESSION AUTHORIZATION 명령을 사용하는 구문을 포함시키세요(ALTER OWNER 명령 대신).

Exclude schema 필드를 사용하여 이름이 패턴과 일치하는 스키마를 덤프하지 않도록 하세요.

Extra float digits 필드를 사용하여 부동 소수점 데이터를 덤프할 때 사용 가능한 최대 정밀도 대신 지정된 값을 사용하세요.

Lock wait timeout 필드를 사용하여 덤프 시작 시 공유 테이블 잠금을 획득하기 위해 영원히 기다리지 않도록 하세요. 대신, 지정된 시간 내에 테이블을 잠글 수 없으면 실패하도록 합니다.

2. 추가보완 정보 제공
Verbose messages 옵션의 실무적 의미
상세 메시지를 비활성화하면 백업 로그가 간결해지고 중요한 오류 메시지를 더 쉽게 식별할 수 있습니다.

자동화된 백업 스크립트나 스케줄러에서 실행할 때 로그 파일 크기를 줄이는 데 유용합니다.

하지만 문제 해결이 필요한 경우에는 상세 메시지가 유용할 수 있으므로, 백업이 실패하는 상황에서는 이 옵션을 활성화하는 것이 좋습니다.

식별자에 큰따옴표 강제 적용의 중요성
PostgreSQL에서 식별자(테이블명, 열명 등)는 대소문자를 구분합니다.

이 옵션을 활성화하면 모든 식별자에 큰따옴표가 적용되어 대소문자가 정확히 유지됩니다.

특히 대소문자가 혼합된 객체 이름이 있거나, 예약어와 같은 이름을 사용하는 경우에 중요합니다.

다른 데이터베이스 시스템으로 마이그레이션할 때 호환성을 높이는 데 도움이 됩니다.

SET SESSION AUTHORIZATION vs ALTER OWNER
SET SESSION AUTHORIZATION은 세션의 현재 사용자를 임시로 변경하는 명령입니다.

ALTER OWNER는 객체의 소유자를 직접 변경하는 명령입니다.

SET SESSION AUTHORIZATION을 사용하면 권한 문제를 우회할 수 있는 경우가 있습니다.

특히 오래된 PostgreSQL 버전이나 특정 권한 설정에서 유용할 수 있습니다.

스키마 제외 패턴의 활용
특정 스키마를 제외하면 백업 크기와 시간을 줄일 수 있습니다.

일반적으로 제외되는 스키마 예:

pg_*: PostgreSQL 시스템 스키마

information_schema: SQL 표준 정보 스키마

임시 데이터나 로그를 저장하는 사용자 정의 스키마

패턴에는 와일드카드(*)를 사용할 수 있습니다.

Extra float digits 옵션의 정밀도 제어
이 옵션은 부동 소수점 값의 표시 정밀도를 제어합니다.

기본값은 최대 가용 정밀도이지만, 이를 조정하여 백업 파일 크기를 줄이거나 특정 정밀도 요구사항을 충족할 수 있습니다.

값 범위: -15에서 3까지 (PostgreSQL 12 이상에서는 -15에서 3까지, 이전 버전에서는 0에서 3까지)

Lock wait timeout의 실무적 중요성
운영 중인 시스템에서 백업을 수행할 때 특히 중요합니다.

테이블 잠금을 획득하지 못하면 백업이 무한정 대기할 수 있어 시스템 성능에 영향을 줄 수 있습니다.

이 옵션을 설정하면 지정된 시간 내에 잠금을 획득하지 못할 경우 백업이 실패하므로, 다른 작업에 미치는 영향을 제한할 수 있습니다.

값은 밀리초 단위로 지정합니다(예: 30000은 30초).
```
